# 프로젝트 현장 관리 솔루션

## 프로젝트 개요
본 프로젝트는 제조업체의 프로젝트 현장 관리를 위한 웹 기반 솔루션입니다. 본사 프로젝트 관리자(PM)가 다수의 현장 프로젝트를 체계적으로 관리하고, 공정 진행 상황을 실시간으로 추적하며, 승인 워크플로우를 통해 효율적인 의사결정을 지원합니다. 또한 주간 로그 리포트를 자동으로 생성하여 관리자에게 이메일로 발송합니다.

## 기술 스택

### Frontend
- **Next.js 14** - 풀스택 React 프레임워크
- **@fullcalendar/react** - 캘린더 뷰
- **react-gantt-task** 또는 **dhtmlx-gantt** - 간트차트
- **react-image-gallery** - 이미지 갤러리
- **Ant Design** 또는 **Material-UI** - UI 컴포넌트
- **Zustand** - 상태 관리

### Backend & Database
- **Supabase** - Backend as a Service
  - **PostgreSQL** - 데이터베이스
  - **Row Level Security (RLS)** - 데이터 보안
  - **Realtime** - 실시간 업데이트
  - **Auth** - 인증/인가
  - **Storage** - 파일 저장소
  - **Edge Functions** - 서버리스 함수
  - **Cron Jobs** - 주간 리포트 자동 발송

### External Services
- **Solapi** - 카카오톡 알림
- **Resend** - 이메일 서비스
- **ExcelJS** - 엑셀 파일 생성 (주간 로그 리포트)

### Deployment
- **Vercel** - Frontend 배포
- **Supabase Cloud** - Backend 인프라

## 주요 기능
- 프로젝트 진행 상황 실시간 추적
- 공정 단계별 관리 (계약 → 도면설계 → 발주 → 레이저 → 용접 → 도금 → 도장 → 판넬 → 조립→ 출하 → 설치 → 인증기간 → 마감 → 준공일)
- 승인/반려 워크플로우
- 간트차트 및 캘린더 뷰
- 카카오톡/이메일 알림
- **주간 로그 리포트 자동 발송** (매주 정해진 시간에 엑셀 파일로 이메일 발송)

## 손대지 말아야 할 파일
- PRD.md
- .env.local

## 문제 해결 방식
- 근본적인 문제를 해결하세요.
 - ex: 로그인 후 데이터가 추가되어야하는 테이블에 추가가안되어서 INSERT 문으로 문제를 해결하는 방식은 하면 안됩니다.
- 로그를 우선적으로 보고 문제를 해결하세요.
- 라이브러리, 프레임워크, 언어 버전을 낮추거나 올려서 해결하는 문제는 작업을 멈추고 왜 그렇게 해야하는지 자세하게 설명하세요.

## 기능 개발 & 수정 & DB 설계시
- PRD.md 파일을 읽어야함
- npm run build로 문제 발생하는지 확인 후 해결
- 서버 재시작

## 테스트 계정(로그인할때 사용)
- email: ref6318@gmail.com
- password: Test1234!!!

## 프로젝트 구조 문서
- @./FOLDER_STRUCTURE.md
  - 전체 프로젝트 파일 구조 및 디렉토리 설명
  - 폴더 구조 트리 뷰
  - 각 파일/폴더별 설명
  - 주요 기능별 파일 매핑
  - 데이터베이스 스키마 개요

## 파일 변경 및 추가 관리 규칙
- FOLDER_STRUCTURE.md 파일에 반영 해야함
- 작업을 멈추고 개발자에게 알려야 함
  - 왜 추가 하고 변경되는지 알려야함

## 데이터베이스 관리 규칙

### 스키마 동기화 요구사항
- **DATABASE_SCHEMA.md 파일과 Supabase 일치성**
  - DATABASE_SCHEMA.md 파일과 실제 Supabase 데이터베이스는 항상 동기화되어야 함
  - 모든 테이블, 컬럼, 타입, 제약조건이 정확히 일치해야 함
  - RLS 정책, 인덱스, 트리거도 동일하게 유지되어야 함

### 데이터베이스 변경 프로세스
- **컬럼 추가/수정 시 필수 절차**
  1. **개발자 승인 필수**: DB 컬럼을 추가하거나 수정하기 전에 반드시 개발자에게 문의하고 승인받아야 함
  2. **영향도 분석**: 변경사항이 기존 기능에 미치는 영향을 사전에 분석
  3. **DATABASE_SCHEMA.md 업데이트**: 승인된 변경사항을 DATABASE_SCHEMA.md 파일에 먼저 반영
  4. **Supabase 적용**: DATABASE_SCHEMA.md의 변경사항을 Supabase에 마이그레이션
  5. **코드 수정**: 관련된 TypeScript 타입 정의 및 서비스 로직 업데이트
  6. **테스트**: 변경사항이 정상 작동하는지 확인

### 데이터 관리/마이그레이션
- 변경 순서: 이슈 → 영향도 분석 → DATABASE_SCHEMA.md 수정(PR) → 마이그레이션 적용 → 타입/서비스 수정 → 테스트

### 주의사항
- **무단 변경 금지**: 개발자 승인 없이 데이터베이스를 직접 수정하지 말 것
- **동기화 검증**: 정기적으로 DATABASE_SCHEMA.md과 Supabase의 일치 여부를 확인
- **문서화**: 모든 DB 변경사항은 변경 사유와 함께 문서화되어야 함
- **백업**: 중요한 변경 전에는 반드시 데이터베이스 백업 수행

## 커뮤니케이션 규칙
- 사용자와는 한국말로 대화해야함

## git 규칙
- 작업할때마다 commit
  - 메시지 규칙
    - feat: 새로운 기능에 대한 커밋
    - fix: 버그 수정에 대한 커밋
    - build: 빌드 관련 파일 수정 / 모듈 설치 또는 삭제에 대한 커밋
    - chore: 그 외 자잘한 수정에 대한 커밋
    - ci: ci 관련 설정 수정에 대한 커밋
    - docs: 문서 수정에 대한 커밋
    - style: 코드 스타일 혹은 포맷 등에 관한 커밋
    - refactor: 코드 리팩토링에 대한 커밋
    - test: 테스트 코드 수정에 대한 커밋
    - perf: 성능 개선에 대한 커밋 
- git add, git commit, git status 외 명령어 실행해야할시 작업을 멈추고 이유 설명
